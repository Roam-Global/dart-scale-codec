# Test Guide

This directory includes test cases for dart scalecodec library.

## Environment setup
Prepare metadata and install all test dependencies
```bash
cd ./test
# prepare metadata from preloaded binary
ln -s ../.metadata/metadataV12.bin ./metadataV12.bin
ln -s ../.metadata/metadataV11.bin ./metadataV11.bin
pub get
```

and build reflect files for test cases
```bash
cd ./ # in root directory of project
pub run build_runner build ./
```

## Run all test cases
```dart
cd ./test
pub run test .
```

## Run coverage test and generate report
Coverage test report is generated by package: [test_coverage](https://pub.dev/packages/test_coverage).  
Users need to install lcov tool, to ensure genhtml command available before converting output data to human readable html report.  
Run following commands   
```bash
cd ./ # in root directory of project
ln -s ./.metadata/metadataV11.bin ./metadataV11.bin
ln -s ./.metadata/metadataV12.bin ./metadataV12.bin
pub run test_coverage # will generate a coverage directory
## output
## Found 10 test files.
## Generated test-all script in test/.test_coverage.dart. Please make sure it is added to .gitignore.
## Coverage report saved to "coverage/lcov.info".
## Overall line coverage rate: 90%.

genhtml -o coverage coverage/lcov.info # gen human readable report

## report will be placed in coverage/index.html
```